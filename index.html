<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="Adam Shay's personal portfolio - Web developer, software engineer, and musician">
        <title>Adam Shay - Portfolio</title>
        <style>
            :root {
                --bg-color: #A79578;
                --text-color: #2c2c2c;
                --accent-color: #837A69; 
                --section-bg: #85492C;
            }
            [data-theme="dev"] {
                --bg-color: #A79578;
                --text-color: #2c2c2c;
                --accent-color: #342D21; 
                --section-bg: #85492C;
            }
            [data-theme="light"] {
                --bg-color: #f0f0f0;
                --text-color: #2c2c2c;
                --accent-color: #b88b3d;
                --section-bg: #ffffff;
            }

            [data-theme="dark"] {
                --bg-color: #333333;
                --text-color:  #E7E5E5;
                --accent-color: #f5f5f5;
                --section-bg: #433c46;
            }

            [data-theme="bw"] {
                --bg-color: #ffffff;
                --text-color: #000000;
                --accent-color: #666666;
                --section-bg: #f0f0f0;
            }

            body {
                margin: 0;
                padding: 0 0 80px 0;
                font-family: system-ui, -apple-system, sans-serif;
                background: var(--bg-color);
                color: var(--text-color);
                line-height: 1.6;
                transition: all 0.3s ease;
            }

            .container {
                max-width: 1200px;
                margin: 1rem auto;
                padding: 1rem;
            }

            /* Theming */
            .theme-controls {
                position: fixed;
                top: 1rem;
                right: 1rem;
                background: var(--section-bg);
                padding: 0.5rem;
                border-radius: 8px;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0, 0.1);
            }

            /* Navigation */

            .navbar {
                background: var(--section-bg);
                padding: 1rem;
                margin-bottom: 2rem;
                border-radius: 8px;
                display: flex;
                align-items: center;
                gap: 2rem;
            }

            .navbar h2 {
                margin: 0;
                color: var(--accent-color);
            }

            .navbar a {
                color: var(--text-color);
                text-decoration: none;
                transition: color 0.3s ease;
            }

            .navbar a:hover {
                color: var(--accent-color);
            }

            .navbar h4 {
                margin: 0;
            }

            /* Section */

            .loading {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                display: flex;
                justify-content: center;
                align-items: center;
                flex-direction: column;
                background-color: var(--bg-color);
                opacity: 1;
                transition: opacity 0.5s ease-in-out, visibility 0.5s ease-in-out;
                z-index: 1000;
                visibility: visible;
            }

            .loading.fade-out {
                opacity: 0;
                visibility: hidden;
            }

            .loading:before,
            .loading:after {
                content: "";
                position: absolute;
                left: 50%;
                min-width: 300vw;
                min-height: 300vw;
                background-color: var(--accent-color);
                animation-name: rotate;
                animation-iteration-count: infinite;
                animation-timing-function: linear;
                z-index: -1;
                transition: opacity 0.8s ease-in-out;
            }

            .loading.fade-out:before,
            .loading.fade-out:after {
                opacity: 0;
            }
            
            .loading:before {
                bottom: 15vh;
                border-radius: 45%;
                animation-duration: 10s;
            }

            .loading:after {
                bottom: 12vh;
                opacity: 0.5;
                border-radius: 47%;
                animation-duration: 10s;
            }

            @keyframes rotate {
                0% {
                    transform: translate(-50%, 0) rotateZ(0deg);
                }
                50% {
                    transform: translate(-50%, -2%) rotateZ(180deg);
                }
                100% {
                    transform: translate(-50%, 0%) rotateZ(360deg);
                }
            }
        


            .nested-section {
                background: var(--section-bg);
                padding: 2rem;
                border-radius: 8px;
                margin-bottom: 2rem;
            }

            /* Carousel styles */

            .carousel {
                position: relative;
                overflow: hidden;
                padding: 1rem 3rem;
                background: var(--section-bg);
                border-radius: 8px;
            }

            .carousel-content {
                display: flex;
                transition: transform 0.5s ease-in-out;
            }

            .carousel-item {
                min-width: 100%;
                padding: 1rem;
                box-sizing: border-box;
                opacity: 0;
                transition: opacity 0.3s ease-in-out;
                display: none;
            }

            .carousel-item.active {
                opacity: 1;
                display: block;
            }

            .carousel-button {
                position: absolute;
                top: 50%;
                transform: translateY(-50%);
                background: var(--accent-color);
                color: white;
                border: none;
                padding: 1rem;
                cursor: pointer;
                border-radius: 50%;
                width: 40px;
                height: 40px;
                display: flex;
                align-items: center;
                justify-content: center;
                transition: background-color 0.3s ease;
            }

            .carousel-button:hover {
                background-color: var(--text-color);
            }

            .carousel-button.prev {
                left: 1rem;
            }

            .carousel-button.next {
                right: 1rem;
            }

            /* Project card styles */
            .project-card {
                background: var(--bg-color);
                padding: 2rem;
                border-radius: 8px;
                margin-bottom: 1rem;
            }

            .project-card h3 {
                margin-top: 0;
                color: var(--accent-color);
            }

            .project-card a {
                display: inline-block;
                margin-top: 1rem;
                color: var(--accent-color);
                text-decoration: none;
                transition: color 0.3s ease;
            }


            /* Navigation dots */
            .carousel-dots {
                display: flex;
                justify-content: center;
                gap: 0.5rem;
                margin-top: 1rem;
            }

            .carousel-dot {
                width: 10px;
                height: 10px;
                border-radius: 50%;
                background: var(--bg-color);
                border: 2px solid var(--accent-color);
                cursor: pointer;
                transition: background-color 0.3s ease;
            }

            .carousel-dot.active {
                background: var(--accent-color);
            }

            /* Music */
            #fixed-player {
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                background: var(--section-bg);
                padding: 1rem;
                box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
                z-index: 1000;
                border-top: 1px solid var(--accent-color);
            }

            .player-container {
                max-width: 1200px;
                margin: 0 auto;
                display: flex;
                align-items: center;
                gap: 1rem;
            }

            .player-info {
                flex: 1;
                min-width: 120px;
            }

            .player-controls {
                display: flex;
                align-items: center;
                gap: 1rem;
            }

            .player-progress {
                flex: 2;
                display: flex;
                align-items: center;
                gap: 0.5rem;
            }

            .progress-bar {
                flex: 1;
                height: 4px;
                background: var(--bg-color);
                border-radius: 2px;
                cursor: pointer;
                position: relative;
            }

            .progress-bar-fill {
                position: absolute;
                left: 0;
                top: 0;
                height: 100%;
                background: var(--accent-color);
                border-radius: 2px;
            }

            .time-display {
                font-size: 0.8rem;
                min-width: 45px;
            }

            .control-button {
                background: none;
                border: none;
                color: var(--text-color);
                cursor: pointer;
                font-size: 1.2rem;
                padding: 0.5rem;
                transition: color 0.3s ease;
            }

            .control-button:hover {
                color: var(--accent-color);
            }

            /* Music player styles */
            .music-item {
                background: var(--bg-color);
                padding: 2rem;
                border-radius: 8px;
                text-align: center;
            }

            .music-item h3 {
                margin-top: 0;
                color: var(--accent-color);
            }

            .project-grid {
                display: grid;
                padding: 1.5rem;
                border-radius: 8px;
            }

            .social-links {
                display: flex;
                gap: 2rem;
                justify-content: center;
            }

            .social-links a {
                color: var(--text-color);
                text-decoration: none;
                padding: 1rem;
                background: var(--bg-color);
                border-radius: 8px;
                transition: all 0.3s ease;
            }

            .social-links a:hover {
                background: var(--accent-color);
                color: white;
            }
        </style>
    </head>
    <body>
        <div class="theme-controls">
            <fieldset>
                <legend>theme</legend>
                <div>
                    <input type="radio" id="dev" name="theme" value="dev">
                    <label for="dev">dev</label>
                </div>
                <div>
                    <input type="radio" id="light" name="theme" value="light">
                    <label for="light">light</label>
                </div>
                <div>
                    <input type="radio" id="dark" name="theme" value="dark">
                    <label for="dark">dark</label>
                </div>
                <div>
                    <input type="radio" id="bw" name="theme" value="bw">
                    <label for="bw">b/w</label>
                </div>
            </fieldset>
        </div>
        <div class="loading">
            
        </div>
        <div class="container">
            <div class="navbar">
                <h2>welcome</h2>
                <a href="#about"><h4>about</h4></a>
                <a href="#projects"><h4>projects</h4></a>
                <a href="#music"><h4>music</h4></a>
                <a href="#social"><h4>social</h4></a>
            </div>
            <div>

                
                <div id="welcome">
                    <div class="nested-section">
                        <h1>hello, i'm adam shay.</h1>
                        <p>welcome to my digital playground.</p>
                    </div>
                </div>

                <div id="about">
                    <div class="nested-section">
                        <p>my name is adam shay.</p>
                        <p>i am a web developer, software engineer, musician, and i am human.</p>
                        <p>the purpose of this site is to serve as a playground.</p>
                        <p>the contents will show what i am learning and what i have done.</p>
                        <p>:)</p>
                    </div>
                </div>

                <div id="music">
                </div>

                <div id="projects">
                    <div class="carousel" id="projects-carousel">
                        <button class="carousel-button prev" onclick="moveCarousel('projects', -1)">👈</button>
                        <button class="carousel-button next" onclick="moveCarousel('projects', 1)">👉</button>

                        <div class="carousel-content">
                            <div class="carousel-item active">
                                <div class="project-card">
                                    <h3>Project 1</h3>
                                    <p>Description</p>
                                    <a href="#">View Project 👉</a>
                                </div>
                            </div>
                        </div>
                        <div class="carousel-dots"></div>
                    </div>
                </div>

                <div id="social">
                    <div class="nested-section">
                        <div class="social-links">
                            <a href="https://github.com/amshaei">GitHub</a>
                            <a href="https://www.linkedin.com/in/adam-shay-826a0817a/">LinkedIn</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="fixed-player">
            <div class="player-container">
                <div class="player-info">
                    <h4 id="current-track-title">No track selected</h4>
                </div>    
                <div class="player-controls">
                    <button class="control-button" id="prev-button">⏪</button>
                    <button class="control-button" id="play-button">▶️</button>
                    <button class="control-button" id="next-button">⏩</button>
                </div>
                <div class="player-progress">
                    <span class="time-display" id="current-time">0:00</span>
                    <div class="progress-bar" id="progress-bar">
                        <div class="progress-bar-fill" id="progress-bar-fill"></div>
                    </div>
                    <span class="time-display" id="duration">0:00</span>
                </div>
                <audio id="audio-player"></audio>
            </div>
        </div>
        <script>

            const audioPlayer = document.getElementById('audio-player');
            const playButton = document.getElementById('play-button');
            const prevButton = document.getElementById('prev-button');
            const nextButton = document.getElementById('next-button');
            const progressBar = document.getElementById('progress-bar');
            const progressBarFill = document.getElementById('progress-bar-fill');
            const currentTimeDisplay = document.getElementById('current-time');
            const durationDisplay = document.getElementById('duration');
            const trackTitle = document.getElementById('current-track-title');

            const tracks = [
                {
                    title: 'overflow',
                    url: 'https://www.dropbox.com/s/bx8kt48cw2wpse2/Overflow.wav?raw=1'
                },
                {
                    title: 'coinflip',
                    url: 'https://www.dropbox.com/s/s73tpptnspldfbm/Coin%20Flip.wav?raw=1'
                },
                {
                    title: 'dysphoritorium',
                    url: 'https://www.dropbox.com/s/411wrsdu6a0flub/Dysphoritorium.wav?raw=1'
                },
                {
                    title: 'thoseeyes',
                    url: 'https://www.dropbox.com/s/6alttslxep1e4lj/Those%20To%20Look%20To%20v1.mp3?raw=1'
                },
                {
                    title: 'saltedsapphire',
                    url: 'https://www.dropbox.com/s/jo0xiunwb1oscsb/Salted%20Sapphire.wav?raw=1'
                },
                {
                    title: 'plaqueal',
                    url: 'https://www.dropbox.com/s/ywn7undbne9vosm/Plaqueal%20v1.mp3?raw=1'
                },
                {
                    title: 'cored',
                    url: 'https://www.dropbox.com/s/kuminu0kc39k2cy/Cored%20v2.mp3?raw=1'
                }
            ];

            let currentTrackIndex = 0;
            
            function loadTrack(index) {
                const track = tracks[index];
                audioPlayer.src = track.url;
                trackTitle.textContent = track.title;
                currentTrackIndex = index;
            }

            function togglePlay() {
                if (audioPlayer.paused) {
                    audioPlayer.play();
                    playButton.textContent = '⏸️'
                } else {
                    audioPlayer.pause();
                    playButton.textContent = '▶️';
                }
            }

            function updateProgress() {
                const percent = (audioPlayer.currentTime / audioPlayer.duration) * 100;
                progressBarFill.style.width = percent + '%';
                currentTimeDisplay.textContent = formatTime(audioPlayer.currentTime);
                durationDisplay.textContent = formatTime(audioPlayer.duration);
            }

            function formatTime(seconds) {
                const minutes = Math.floor(seconds / 60);
                const remainingSeconds = Math.floor(seconds % 60);
                return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;
            }

            function setProgress(e) {
                const width = progressBar.clientWidth;
                const clickX = e.offsetX;
                const duration = audioPlayer.duration;
                audioPlayer.currentTime = (clickX/ width) * duration;
            }

            playButton.addEventListener('click', togglePlay);
            audioPlayer.addEventListener('timeupdate', updateProgress);
            progressBar.addEventListener('click', setProgress);

            prevButton.addEventListener('click', () => {
                currentTrackIndex = (currentTrackIndex - 1 + tracks.length) % tracks.length;
                loadTrack(currentTrackIndex);
                if (!audioPlayer.paused) {
                    audioPlayer.play();
                }
            });

            nextButton.addEventListener('click', () => {
                currentTrackIndex = (currentTrackIndex + 1) % tracks.length;
                loadTrack(currentTrackIndex);
                if (!audioPlayer.paused) {
                    audioPlayer.play();
                }
            })

            audioPlayer.addEventListener('ended', () => {
                currentTrackIndex = (currentTrackIndex + 1) % tracks.length;
                loadTrack(currentTrackIndex);
                audioPlayer.play();
            });

            loadTrack(0);

            let isLoading = false;

            // Theme switching
            const themeRadios = document.querySelectorAll('input[name="theme"]');

            window.onload = function() {
                isLoading = true;
                // initializeCarousel('music');
                initializeCarousel('projects');

                // Set audio playback rates
                document.querySelectorAll('audio').forEach(audio => {
                    audio.defaultPlaybackRate = 1.25;
                    audio.playbackRate = 1.25;
                });

                // Load saved theme
                const savedTheme = localStorage.getItem('theme') || 'light';
                document.body.setAttribute('data-theme', savedTheme);

                // check the corresponding radio button
                const savedRadio = document.querySelector(`input[value="${savedTheme}"]`);
                if (savedRadio) {
                    savedRadio.checked = true;
                }

                // Finish loading
                setTimeout(() => {
                    const loadingScreen = document.querySelector('.loading');
                    loadingScreen.classList.add('fade-out');

                    loadingScreen.addEventListener('transitioned', () => {
                        loadingScreen.style.display = 'none';
                    }, { once: true });
                    isLoading = false;
                }, 500);
            }

            themeRadios.forEach(radio => {
                radio.addEventListener('change', (e) => {
                    const selectedTheme = e.target.value;
                    document.body.setAttribute('data-theme', selectedTheme);
                    localStorage.setItem('theme', selectedTheme);
                })
            });

            // Carousel function - update this to dynamically get number of songs and projects

            const musicCount = document.querySelectorAll('div[class="music-item"]').length;
            const projectCount = document.querySelectorAll('div[class="project-card"]').length;

            const carousels = {
                music: { 
                    currentIndex: 0,
                    totalItems: musicCount
                },
                projects: {
                    currentIndex: 0,
                    totalItems: projectCount
                }
            };

            function initializeCarousel(type) {
                const carousel = document.querySelector(`#${type}-carousel`);
                const dotsContainer = carousel.querySelector('.carousel-dots');

                dotsContainer.innerHTML = '';

                for (let i = 0; i < carousels[type].totalItems; i++) {
                    const dot = document.createElement('div');
                    dot.classList.add('carousel-dot');
                    if (i === 0) dot.classList.add('active');
                    dot.onclick = () => {
                        const oldIndex = carousels[type].currentIndex;
                        carousels[type].currentIndex = i;
                        updateCarousel(type, oldIndex, i);
                    };
                    dotsContainer.appendChild(dot);
                }
            }

            function moveCarousel(type, direction) {
                const carousel = carousels[type];
                const oldIndex = carousel.currentIndex;

                carousel.currentIndex = (carousel.currentIndex + direction + carousel.totalItems) % carousel.totalItems;

                updateCarousel(type, oldIndex, carousel.currentIndex);
            }

            function updateCarousel(type, oldIndex, newIndex) {
                const items = document.querySelectorAll(`#${type}-carousel .carousel-item`);
                const dots = document.querySelectorAll(`#${type}-carousel .carousel-dot`);

                items[oldIndex].classList.remove('active');
                items[newIndex].classList.add('active');

                dots[oldIndex].classList.remove('active');
                dots[newIndex].classList.add('active');
            }

            // Song selection
            function songSelect(index) {
                loadTrack(index);
                audioPlayer.play();
                playButton.textContent = "⏸️"
            }
        </script>
    </body>
</html>